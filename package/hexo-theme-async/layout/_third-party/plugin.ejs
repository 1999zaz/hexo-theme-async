<%
let isSwiper,isTyping,isKatex;

isSwiper = Object.values(theme.banner).findIndex(item=>item?.type && item.type === 'slideshow' ) > 0;
isTyping = theme?.sidebar?.typedText && Array.isArray(theme.sidebar.typedText) && theme.sidebar.typedText.length>0;
isKatex = theme.katex.global || page?.katex;

%>

<% if(loadtype ==='css') {%>

    <%- css(theme.assets.plugin.row.css) %>
    <%- css(theme.assets.plugin.locomotive_scroll.css) %>
    <%- css(theme.assets.plugin.fancybox.css) %>

    <% if(isSwiper) {%>
        <%- css(theme.assets.plugin.swiper.css) %>
    <% } %>

    <% if(isKatex) {%>
        <%- css(theme.assets.plugin.katex.css) %>

        <% if(theme.katex.copy_tex) {%>
            <%- css(theme.assets.plugin.katex.copy_tex.css) %>
        <% } %>
    <% } %>

<% } else { %>

    <%- js(theme.assets.plugin.swup.js) %>
    <%- js(theme.assets.plugin.locomotive_scroll.js) %>
    <%- js(theme.assets.plugin.fancybox.js) %>

    <% if(isSwiper) {%>
        <%- js(theme.assets.plugin.swiper.js) %>
    <% } %>

    <% if(isTyping) {%>
        <%- js(theme.assets.plugin.typing.js) %>
    <% } %>

    <% if(isKatex) {
        let options = { 
            ...theme.katex.options
        }
        if(page?.katex?.options) {
            options = {
                ...options,
                ...page.katex.options
            }
        }
    %>
        <%- js(theme.assets.plugin.katex.js) %>
        <% if(theme.katex.copy_tex) {%>
            <%- js(theme.assets.plugin.katex.copy_tex.js) %>
        <% } %>
        <%- js(theme.assets.plugin.katex.auto_render) %>
        <%- variable('KATEX_OPTIONS',options) %>
    <% } %>
<% } %>
